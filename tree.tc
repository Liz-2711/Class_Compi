%option lang = "C++"

%decls %{
#include <string>
using stdstring = std::string;
%}
%node AstNode %abstract %typedef

%node Expr AstNode %abstract

%node BinaryExpr Expr %abstract = {
    Expr *expr1;
    Expr *expr2;
}

%node AddExpr BinaryExpr

%node NumberExpr Expr = {
    int value;
}

%operation %virtual int evaluate(AstNode *this)

evaluate(AddExpr) {
    return expr1->evaluate() + expr2->evaluate();
}

evaluate(NumberExpr) {
    return value;
}